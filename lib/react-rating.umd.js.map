{"version":3,"file":"react-rating.umd.js","sources":["../src/utils/style.js","../src/RatingSymbol.js","../src/Rating.js","../src/utils/noop.js","../src/RatingAPILayer.js"],"sourcesContent":["var style = {\n  display: 'inline-block',\n  borderRadius: '50%',\n  border: '5px double white',\n  width: 30,\n  height: 30\n};\n\nexport default {\n  empty: {\n    ...style,\n    backgroundColor: '#ccc'\n  },\n  full: {\n    ...style,\n    backgroundColor: 'black'\n  },\n  placeholder: {\n    ...style,\n    backgroundColor: 'red'\n  }\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Return the corresponding React node for an icon.\nconst _iconNode = (icon) => {\n  // If it is already a React Element just return it.\n  if (React.isValidElement(icon)) {\n    return icon;\n  }\n  // If it is an object, try to use it as a CSS style object.\n  if (typeof icon === 'object' && icon !== null) {\n    return <span style={icon} />;\n  }\n  // If it is a string, use it as class names.\n  if (Object.prototype.toString.call(icon) === '[object String]') {\n    return <span className={icon} />;\n  }\n};\n\nclass RatingSymbol extends React.PureComponent {\n  render() {\n    const {\n      index,\n      inactiveIcon,\n      activeIcon,\n      percent,\n      direction,\n      readonly,\n      onClick,\n      onMouseMove\n    } = this.props;\n    const backgroundNode = _iconNode(inactiveIcon);\n    const iconNode = _iconNode(activeIcon);\n    const iconContainerStyle = {\n      display: 'inline-block',\n      position: 'absolute',\n      overflow: 'hidden',\n      top: 0,\n      [direction === 'rtl' ? 'right' : 'left']: 0,\n      width: `${percent}%`\n    };\n    const style = {\n      cursor: !readonly ? 'pointer' : 'inherit',\n      display: 'inline-block',\n      position: 'relative'\n    };\n\n    function handleMouseMove(e) {\n      if (onMouseMove) {\n        onMouseMove(index, e);\n      }\n    }\n\n    function handleMouseClick(e) {\n      if (onClick) {\n        // [Supporting both TouchEvent and MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events/Supporting_both_TouchEvent_and_MouseEvent)\n        // We must prevent firing click event twice on touch devices.\n        e.preventDefault();\n        onClick(index, e);\n      }\n    }\n\n    return (\n      <span\n        style={style}\n        onClick={handleMouseClick}\n        onMouseMove={handleMouseMove}\n        onTouchMove={handleMouseMove}\n        onTouchEnd={handleMouseClick}\n      >\n        {backgroundNode}\n        <span style={iconContainerStyle}>\n          {iconNode}\n        </span>\n      </span>\n    );\n  }\n}\n\n// Define propTypes only in development. They will be void in production.\nRatingSymbol.propTypes = typeof __DEV__ !== 'undefined' && __DEV__ && {\n  index: PropTypes.number.isRequired,\n  readonly: PropTypes.bool.isRequired,\n  inactiveIcon: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.element\n  ]).isRequired,\n  activeIcon: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.element\n  ]).isRequired,\n  percent: PropTypes.number.isRequired,\n  direction: PropTypes.string.isRequired,\n  onClick: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onTouchMove: PropTypes.func,\n  onTouchEnd: PropTypes.func\n};\n\nexport default RatingSymbol;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Symbol from './RatingSymbol';\n\nclass Rating extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Indicates the value that is displayed to the user in the form of symbols.\n      // It can be either 0 (for no displayed symbols) or (0, end]\n      displayValue: this.props.value,\n      // Indicates if the user is currently hovering over the rating element\n      interacting: false\n    };\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.symbolMouseMove = this.symbolMouseMove.bind(this);\n    this.symbolClick = this.symbolClick.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const valueChanged = this.props.value !== nextProps.value;\n    this.setState((prevState) => ({\n      displayValue: valueChanged ? nextProps.value : prevState.displayValue\n    }));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // Ignore state update due to value changed from props.\n    // Usually originated through an onClick event.\n    if (prevProps.value !== this.props.value) {\n      return;\n    }\n\n    // When hover ends, call this.props.onHover with no value.\n    if (prevState.interacting && !this.state.interacting) {\n      return this.props.onHover();\n    }\n\n    // When hover over.\n    if (this.state.interacting) {\n      this.props.onHover(this.state.displayValue);\n    }\n  }\n\n  symbolClick(symbolIndex, event) {\n    const value = this.calculateDisplayValue(symbolIndex, event);\n    this.props.onClick(value, event);\n  }\n\n  symbolMouseMove(symbolIndex, event) {\n    const value = this.calculateDisplayValue(symbolIndex, event);\n    // This call should cause an update only if the state changes.\n    // Mainly the first time the mouse enters and whenever the value changes.\n    // So DidComponentUpdate is NOT called for every mouse movement.\n    this.setState({\n      interacting: !this.props.readonly,\n      displayValue: value\n    });\n  }\n\n  onMouseLeave() {\n    this.setState({\n      displayValue: this.props.value,\n      interacting: false\n    });\n  }\n\n  calculateDisplayValue(symbolIndex, event) {\n    const percentage = this.calculateHoverPercentage(event);\n    // Get the closest top fraction.\n    const fraction = Math.ceil(percentage % 1 * this.props.fractions) / this.props.fractions;\n    // Truncate decimal trying to avoid float precission issues.\n    const precision = 10 ** 3;\n    const displayValue =\n      symbolIndex + (Math.floor(percentage) + Math.floor(fraction * precision) / precision);\n    // ensure the returned value is greater than 0 and lower than totalSymbols\n    return displayValue > 0 ? displayValue > this.props.totalSymbols ? this.props.totalSymbols : displayValue : 1 / this.props.fractions;\n  }\n\n  calculateHoverPercentage(event) {\n    const clientX = event.nativeEvent.type.indexOf(\"touch\") > -1\n      ? event.nativeEvent.type.indexOf(\"touchend\") > -1\n        ? event.changedTouches[0].clientX\n        : event.touches[0].clientX\n      : event.clientX;\n\n    const targetRect = event.target.getBoundingClientRect();\n    const delta = this.props.direction === 'rtl'\n      ? targetRect.right - clientX\n      : clientX - targetRect.left;\n\n    // Returning 0 if the delta is negative solves the flickering issue\n    return delta < 0 ? 0 : delta / targetRect.width;\n  }\n\n  render() {\n    const {\n      readonly,\n      quiet,\n      totalSymbols,\n      value,\n      labels,\n      placeholderValue,\n      direction,\n      emptySymbol,\n      fullSymbol,\n      placeholderSymbol,\n      className,\n      id,\n      style,\n      tabIndex\n    } = this.props;\n    const { displayValue, interacting } = this.state;\n    const symbolNodes = [];\n    const empty = [].concat(emptySymbol);\n    const full = [].concat(fullSymbol);\n    const placeholder = [].concat(placeholderSymbol);\n    const shouldDisplayPlaceholder =\n      placeholderValue !== 0 &&\n      value === 0 &&\n      !interacting;\n\n    // The value that will be used as base for calculating how to render the symbols\n    let renderedValue;\n    if (shouldDisplayPlaceholder) {\n      renderedValue = placeholderValue;\n    } else {\n      renderedValue = quiet ? value : displayValue;\n    }\n\n    // The amount of full symbols\n    //const fullSymbols = Math.floor(renderedValue);\n\n    for (let i = 0; i < totalSymbols; i++) {\n      let percent;\n      // Calculate each symbol's fullness percentage\n      /*if (i - fullSymbols < 0) {\n        percent = 100;\n      } else if (i - fullSymbols === 0) {\n        percent = (renderedValue - i) * 100;\n      } else {\n        percent = 0;\n      }*/\n      \n      if (i === renderedValue-1) {\n        percent = 100;\n      } else {\n        percent = 0;\n      }\n      symbolNodes.push(\n        <div style={{display:\"inline-block\", height:\"80px\", position:\"relative\"}}>\n        <Symbol\n          key={i}\n          index={i}\n          readonly={readonly}\n          inactiveIcon={empty[i % empty.length]}\n          activeIcon={\n            shouldDisplayPlaceholder ? placeholder[i % full.length] : full[i % full.length]\n          }\n          percent={percent}\n          direction={direction}\n          {...(!readonly && {\n            onClick: this.symbolClick,\n            onMouseMove: this.symbolMouseMove,\n            onTouchMove: this.symbolMouseMove,\n            onTouchEnd: this.symbolClick\n          })}\n        />\n        <div style={{color:\"#044043\", width:\"100%\", fontSize:\"10px\",fontWeight:\"600\", left:\"50%\", bottom:\"-10px\", margin:\"-5px 0 0 -40px\", position:\"absolute\"}}>{labels[i]}</div>\n        </div>\n      );\n    }\n\n    return (\n      <span\n        id={id}\n        style={{...style, display: 'inline-block', direction }}\n        className={className}\n        tabIndex={tabIndex}\n        aria-label={this.props['aria-label']}\n        {...(!readonly && {\n          onMouseLeave: this.onMouseLeave\n        })}\n      >\n        {symbolNodes}\n      </span>\n    );\n  }\n}\n\n// Define propTypes only in development.\nRating.propTypes = typeof __DEV__ !== 'undefined' && __DEV__ && {\n  totalSymbols: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired, // Always >= 0\n  placeholderValue: PropTypes.number.isRequired,\n  readonly: PropTypes.bool.isRequired,\n  quiet: PropTypes.bool.isRequired,\n  fractions: PropTypes.number.isRequired,\n  direction: PropTypes.string.isRequired,\n  emptySymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]).isRequired,\n  fullSymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]).isRequired,\n  placeholderSymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]),\n  onClick: PropTypes.func.isRequired,\n  onHover: PropTypes.func.isRequired\n};\n\nexport default Rating;\n","function noop() {}\nnoop._name = 'react_rating_noop';\n\nexport default noop;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Style from './utils/style';\nimport Rating from './Rating';\nimport noop from './utils/noop';\n\nclass RatingAPILayer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.initialRating\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleHover = this.handleHover.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      value: nextProps.initialRating\n    });\n  }\n\n  handleClick(value, e) {\n    const newValue = this.translateDisplayValueToValue(value);\n    console.log('handleClick','value',value,'newValue', newValue);\n    this.props.onClick(newValue);\n    // Avoid calling setState if not necessary. Micro optimisation.\n    if (this.state.value !== newValue) {\n      // If we have a new value trigger onChange callback.\n      this.setState({\n        value: newValue\n      }, () => this.props.onChange(this.state.value));\n    }\n  }\n\n  handleHover(displayValue) {\n    const value = displayValue === undefined\n      ? displayValue\n      : this.translateDisplayValueToValue(displayValue);\n    this.props.onHover(value);\n  }\n\n  translateDisplayValueToValue(displayValue) {\n    const translatedValue = this.props.values[displayValue-1];\n    // minimum value cannot be equal to start, since it's exclusive\n    return translatedValue === this.props.start\n      ? translatedValue + 1 / this.props.fractions\n      : translatedValue;\n  }\n\n  tranlateValueToDisplayValue(value) {\n    if (value === undefined) {\n      return 0;\n    }\n    return (value - this.props.start) / this.props.step;\n  }\n\n  render() {\n    const {\n      step,\n      emptySymbol,\n      fullSymbol,\n      placeholderSymbol,\n      readonly,\n      quiet,\n      fractions,\n      direction,\n      /*start,\n      stop,*/\n      values,\n      labels,\n      id,\n      className,\n      style,\n      tabIndex\n    } = this.props;\n\n    /*function calculateTotalSymbols(start, stop, step) {\n      return Math.floor((stop - start) / step);\n    }*/\n    function calculateTotalSymbols(values) {\n      return values.length;\n    }\n    return (\n      <Rating\n        id={id}\n        style={style}\n        className={className}\n        tabIndex={tabIndex}\n        aria-label={this.props['aria-label']}\n        totalSymbols={/*calculateTotalSymbols(start, stop, step)*/calculateTotalSymbols(values)}\n        labels={labels}\n        value={this.tranlateValueToDisplayValue(this.state.value)}\n        placeholderValue={this.tranlateValueToDisplayValue(this.props.placeholderRating)}\n        readonly={readonly}\n        quiet={quiet}\n        fractions={fractions}\n        direction={direction}\n        emptySymbol={emptySymbol}\n        fullSymbol={fullSymbol}\n        placeholderSymbol={placeholderSymbol}\n        onClick={this.handleClick}\n        onHover={this.handleHover}\n      />\n    );\n  }\n}\n\nRatingAPILayer.defaultProps = {\n  start: 0,\n  stop: 5,\n  values: [],\n  step: 1,\n  readonly: false,\n  quiet: false,\n  fractions: 1,\n  direction: 'ltr',\n  onHover: noop,\n  onClick: noop,\n  onChange: noop,\n  emptySymbol: Style.empty,\n  fullSymbol: Style.full,\n  placeholderSymbol: Style.placeholder\n};\n\n// Define propTypes only in development.\nRatingAPILayer.propTypes = typeof __DEV__ !== 'undefined' && __DEV__ && {\n  start: PropTypes.number,\n  stop: PropTypes.number,\n  values: PropTypes.array,\n  labels: PropTypes.array,\n  step: PropTypes.number,\n  initialRating: PropTypes.number,\n  placeholderRating: PropTypes.number,\n  readonly: PropTypes.bool,\n  quiet: PropTypes.bool,\n  fractions: PropTypes.number,\n  direction: PropTypes.string,\n  emptySymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]),\n  fullSymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]),\n  placeholderSymbol: PropTypes.oneOfType([\n    // Array of class names and/or style objects.\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.element])),\n    // Class names.\n    PropTypes.string,\n    // Style objects.\n    PropTypes.object,\n    // React element\n    PropTypes.element\n  ]),\n  onHover: PropTypes.func,\n  onClick: PropTypes.func,\n  onChange: PropTypes.func\n};\n\nexport default RatingAPILayer;\n"],"names":["style","display","borderRadius","border","width","height","empty","backgroundColor","full","placeholder","_iconNode","icon","React","isValidElement","Object","prototype","toString","call","RatingSymbol","props","index","inactiveIcon","activeIcon","percent","direction","readonly","onClick","onMouseMove","backgroundNode","iconNode","iconContainerStyle","position","overflow","top","cursor","handleMouseMove","e","handleMouseClick","preventDefault","PureComponent","Rating","state","displayValue","value","interacting","onMouseLeave","bind","symbolMouseMove","symbolClick","nextProps","valueChanged","setState","prevState","prevProps","onHover","symbolIndex","event","calculateDisplayValue","percentage","calculateHoverPercentage","fraction","Math","ceil","fractions","precision","floor","totalSymbols","clientX","nativeEvent","type","indexOf","changedTouches","touches","targetRect","target","getBoundingClientRect","delta","right","left","quiet","labels","placeholderValue","emptySymbol","fullSymbol","placeholderSymbol","className","id","tabIndex","symbolNodes","concat","shouldDisplayPlaceholder","renderedValue","i","push","_Symbol","length","onTouchMove","onTouchEnd","color","fontSize","fontWeight","bottom","margin","noop","_name","RatingAPILayer","initialRating","handleClick","handleHover","newValue","translateDisplayValueToValue","console","log","onChange","undefined","translatedValue","values","start","step","calculateTotalSymbols","tranlateValueToDisplayValue","placeholderRating","defaultProps","stop","Style"],"mappings":"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"}